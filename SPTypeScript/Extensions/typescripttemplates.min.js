var CSR;(function(n){function t(n,t){return new r(n,t)}function i(n){var t=n.Name+"_"+n.Id+"_$"+n.FieldType+"Field";return $get(t)}function u(n,t){var i={ListSchema:{Field:[n]},FieldControlModes:{}},r;return i.FieldControlModes[n.Name]=t,r=SPClientTemplates.TemplateManager.GetTemplates(i),r.Fields[n.Name]}n.override=t;n.getControl=i;var r=function(){function t(n,t){this.ListTemplateType=n;this.BaseViewID=t;this.Templates={Fields:{}};this.OnPreRender=[];this.OnPostRender=[];this.IsRegistered=!1}return t.prototype.view=function(n){return this.Templates.View=n,this},t.prototype.item=function(n){return this.Templates.Item=n,this},t.prototype.header=function(n){return this.Templates.Header=n,this},t.prototype.body=function(n){return this.Templates.Body=n,this},t.prototype.footer=function(n){return this.Templates.Footer=n,this},t.prototype.fieldView=function(n,t){return this.Templates.Fields[n]=this.Templates.Fields[n]||{},this.Templates.Fields[n].View=t,this},t.prototype.fieldDisplay=function(n,t){return this.Templates.Fields[n]=this.Templates.Fields[n]||{},this.Templates.Fields[n].DisplayForm=t,this},t.prototype.fieldNew=function(n,t){return this.Templates.Fields[n]=this.Templates.Fields[n]||{},this.Templates.Fields[n].NewForm=t,this},t.prototype.fieldEdit=function(n,t){return this.Templates.Fields[n]=this.Templates.Fields[n]||{},this.Templates.Fields[n].EditForm=t,this},t.prototype.template=function(n,t){return this.Templates[n]=t,this},t.prototype.fieldTemplate=function(n,t,i){return this.Templates.Fields[n]=this.Templates.Fields[n]||{},this.Templates.Fields[n][t]=i,this},t.prototype.onPreRender=function(){for(var t,i=[],n=0;n<arguments.length-0;n++)i[n]=arguments[n+0];for(t=0;t<i.length;t++)this.OnPreRender.push(i[t]);return this},t.prototype.onPostRender=function(){for(var t,i=[],n=0;n<arguments.length-0;n++)i[n]=arguments[n+0];for(t=0;t<i.length;t++)this.OnPostRender.push(i[t]);return this},t.prototype.makeReadOnly=function(n){this.onPreRender(function(t){var o,r,f,i,h,s,e,c;if(t.ControlMode!=SPClientTemplates.ClientControlMode.Invalid&&t.ControlMode!=SPClientTemplates.ClientControlMode.DisplayForm)if(t.ControlMode==SPClientTemplates.ClientControlMode.View){for(o=t,f=o.ListSchema.Field,i=0;i<f.length;i++)f[i].Name===n&&(r=f[i]);r&&(o.inGridMode?r.ReadOnlyField=!0:(h=r,h.ReadOnly="TRUE"))}else s=t,e=s.ListSchema.Field[0],e.Name===n&&(e.ReadOnlyField=!0,c=u(e,SPClientTemplates.ClientControlMode.DisplayForm),s.Templates.Fields[n]=c)});return this},t.prototype.makeHidden=function(n){this.onPreRender(function(t){var i,u,f,r,e,s,h;if(t.ControlMode!=SPClientTemplates.ClientControlMode.Invalid)if(t.ControlMode==SPClientTemplates.ClientControlMode.View){for(i=t,f=i.ListSchema.Field,r=0;r<f.length;r++)f[r].Name===n&&(u=f[r]);u&&(i.inGridMode?u.Hidden=!0:i.ListSchema.Field.splice(i.ListSchema.Field.indexOf(u),1))}else if(e=t,s=e.ListSchema.Field[0],s.Name===n){s.Hidden=!0;for(var c=e.FormUniqueId+e.FormContext.listAttributes.Id+n,l=$get(c),o=l;o.tagName.toUpperCase()!=="TR";)o=o.parentElement;h=o;h.style.display="none"}});return this},t.prototype.cascadeLookup=function(t,i){function y(t){if(t.ControlMode==SPClientTemplates.ClientControlMode.EditForm||t.ControlMode==SPClientTemplates.ClientControlMode.NewForm){var i=t.ListSchema.Field[0];v.forEach(function(t){i.Name==t&&(f[t]=n.getControl(i),$addHandler(f[t],"change",function(){s()}))})}}function s(){SP.SOD.executeFunc("sp.js","SP.ClientContext",function(){var n=SP.ClientContext.get_current(),s=n.get_web(),h=e.LookupListId,l=s.get_lists().getById(h),r=new SP.CamlQuery,v=i.replace(o,function(n){var t=a(n);return f[t]?f[t].value:""}),t;r.set_viewXml("<View><Query><Where>"+v+'<\/Where><\/Query> <ViewFields><FieldRef Name="ID" /><FieldRef Name="Title"/><\/ViewFields><\/View>');t=l.getItems(r);n.load(t);n.executeQueryAsync(function(){for(var r,n,i,f;u.options.length;)u.options.remove(0);for(e.Required||(r=new Option(Strings.STS.L_LookupFieldNoneOption,"0"),u.options.add(r)),n=t.getEnumerator();n.moveNext();)i=n.get_current(),f=new Option(i.get_item("Title"),i.get_item("ID")),u.options.add(f);c()},function(n,t){console.log(t.get_message())})})}function h(n){function a(){u=document.getElementById(i);u!=null&&AddEvtHandler(u,"onchange",c);s()}function v(){var n='<span dir="'+STSHtmlEncode(r.fieldSchema.Direction)+'">';return n+='<select id="'+STSHtmlEncode(i)+'" title="'+STSHtmlEncode(r.fieldSchema.Title)+'">',n+"<\/select><br/><\/span>"}var t;if(n==null||(r=SPClientTemplates.Utility.GetFormContextForCurrentField(n),r==null||r.fieldSchema==null))return"";e=r.fieldSchema;r.fieldSchema.Required&&(t=new SPClientForms.ClientValidation.ValidatorSet,t.RegisterValidator(new SPClientForms.ClientValidation.RequiredValidator),r.registerClientValidator(r.fieldName,t));var i=r.fieldName+"_"+r.fieldSchema.Id+"_$LookupField",f=r.fieldValue!=null?r.fieldValue:"",o=SPClientTemplates.Utility.ParseLookupValue(f),h=o.LookupId==0;return h&&(f=""),r.registerInitCallback(r.fieldName,a),r.registerFocusCallback(r.fieldName,function(){u!=null&&u.focus()}),r.registerValidationErrorCallback(r.fieldName,function(n){SPFormControl_AppendValidationErrorMessage(i,n)}),r.registerGetValueCallback(r.fieldName,l),r.updateControlValue(r.fieldName,f),v()}function c(){u!=null&&r.updateControlValue(r.fieldName,l())}function l(){return u==null?"":u.value=="0"||u.value==""?"":u.value+";#"+u.options[u.selectedIndex].text}function a(n){return n.substring(1,n.length-1)}var o=/\{[^\}]+\}/g,v=o.exec(i).map(function(n){return a(n)}),f={},u,e,r;return this.fieldEdit(t,h).fieldNew(t,h).onPostRender(y)},t.prototype.computedValue=function(t,i){function o(){e&&(e.value=i.apply(this,f.map(function(n){return r[n]?r[n].value:""})))}for(var r,e,f=[],u=0;u<arguments.length-2;u++)f[u]=arguments[u+2];r={};return this.onPostRender(function(i){if(i.ControlMode==SPClientTemplates.ClientControlMode.EditForm||i.ControlMode==SPClientTemplates.ClientControlMode.NewForm){var u=i.ListSchema.Field[0];u.Name==t&&(e=n.getControl(u));f.forEach(function(t){u.Name==t&&(r[t]=n.getControl(u),$addHandler(r[t],"change",function(){o()}))})}})},t.prototype.register=function(){this.IsRegistered||(SPClientTemplates.TemplateManager.RegisterTemplateOverrides(this),this.IsRegistered=!0)},t}()})(CSR||(CSR={}));typeof SP=="object"&&SP&&typeof SP.SOD=="object"&&SP.SOD&&SP.SOD.notifyScriptLoadedAndExecuteWaitingJobs("typescripttemplates.ts");
/*
//# sourceMappingURL=typescripttemplates.min.js.map
*/