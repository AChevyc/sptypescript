$(function(){function n(n){var t={element:$(""),url:"",init:function(i){t.element=i,t.url=_spPageContextInfo.webAbsoluteUrl+"/_api/search/query?querytext='"+n+"'"},load:function(){var i=this;SP.SOD.executeOrDelayUntilScriptLoaded(function(){var r=Microsoft.SharePoint.Client.Search.Query,u=SP.ClientContext.get_current(),f=new r.KeywordQuery(u),e,o;f.set_queryText(n),e=new r.SearchExecutor(u),o=e.executeQuery(f),u.executeQueryAsync(function(){var n=new r.ResultTableCollection,u;n.initPropertiesFromJson(o.get_value()),u=n.get_item(0).get_resultRows(),t.element.html(i.createHtml(u))},function(n,t){alert(t.get_message())})},"sp.search.js")},createHtml:function(n){for(var t="<table>",i=0;i<n.length;i++)t+="<tr><td>",t+=n[i].Title,t+="<\/td><td>",t+=n[i].Path,t+="<\/td><\/tr>";return t+"<\/table>"}};t.init($("#resultsDiv")),t.load()}$("#toolbarDiv").show(),$("#toolbarDiv input[type=button]").click(function(){n($("#queryTerms").val())}),$("#toolbarDiv input[type=text]").keypress(function(t){t.keyCode==13&&(n($("#queryTerms").val()),t.preventDefault())})})