function showToolbar(){$("#toolbarDiv").show(),$("#toolbarDiv input[type=button]").click(function(){executeQuery($("#queryTerms").val())}),$("#toolbarDiv input[type=text]").keypress(function(n){n.keyCode==13&&(executeQuery($("#queryTerms").val()),n.preventDefault())})}function executeQuery(n){var i=Microsoft.SharePoint.Client.Search.Query,t={element:"",url:"",init:function(i){t.element=i,t.url=_spPageContextInfo.webAbsoluteUrl+"/_api/search/query?querytext='"+n+"'"},load:function(){var o=this,r=SP.ClientContext.get_current(),u=new i.KeywordQuery(r),f,e;u.set_queryText(n),f=new i.SearchExecutor(r),e=f.executeQuery(u),r.executeQueryAsync(function(){var n=new i.ResultTableCollection,r;n.initPropertiesFromJson(e.get_value()),r=n.get_item(0).get_resultRows(),t.element.html(o.createHtml(r))},function(n,t){alert(t.get_message())})},createHtml:function(n){for(var t="<table>",i=0;i<n.length;i++)t+="<tr><td>",t+=n[i].Title,t+="<\/td><td>",t+=n[i].Path,t+="<\/td><tr>";return t+"<\/table>"}};t.init($("#resultsDiv")),t.load()}$(function(){var n=SP.SOD.executeOrDelayUntilScriptLoaded(showToolbar,"sp.search.js")})