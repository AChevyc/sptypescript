var _;(function(){var n,t,i;(function(n){var t=function(){function n(){}return n.prototype.Validate=function(n){n=SPClientTemplates.Utility.Trim(n);var t=!/^\d{16}$/.test(n),i=t?"Please, fill out 4 digits per every text field.":"";return new SPClientForms.ClientValidation.ValidationResult(t,i)},n}(),r=function(){function n(){this._fieldName="";this._fieldIds=[];this._errorContainerId=null;this._getVisaValuePart=function(n,t){return n.length==16?n.substring(t*4,(t+1)*4):n}}return n.prototype._wrapIntoInput=function(n,t,i){var r=SPClientTemplates.Utility.GetFormContextForCurrentField(n),u=r.fieldName+"_"+r.fieldSchema.Id+"_VisaField_"+i;return this._fieldIds[i]=u,"<input type='text' id='"+u+"' value='"+t+"' maxlength='4' size='4' />"},n.prototype._wrapErrorArea=function(n){var t=SPClientTemplates.Utility.GetFormContextForCurrentField(n),i=t.fieldName+"_"+t.fieldSchema.Id+"_VisaField_Error";return this._errorContainerId=i,"<span id='"+i+"' class='ms-formvalidation ms-csrformvalidation'><\/span>"},n.prototype._onGetValue=function(){var t="",n;if(this._fieldIds.length==4)for(n=0;n<this._fieldIds.length;n++)t+=document.getElementById(this._fieldIds[n]).value;return t},n.prototype._initValidators=function(n){var u=this,i=SPClientTemplates.Utility.GetFormContextForCurrentField(n),r=new SPClientForms.ClientValidation.ValidatorSet;i.fieldSchema.Required&&r.RegisterValidator(new SPClientForms.ClientValidation.RequiredValidator);r.RegisterValidator(new t);i.registerValidationErrorCallback(i.fieldName,function(n){return u.onError(n)});i.registerClientValidator(i.fieldName,r)},n.prototype.onError=function(n){this._errorContainerId!=null&&(document.getElementById(this._errorContainerId).innerHTML="<span role='alert'>"+n.errorMessage+"<\/span>")},n.prototype.newFormTemplate=function(n){var i=this,t;return this._initValidators(n),t=SPClientTemplates.Utility.GetFormContextForCurrentField(n),t.registerGetValueCallback(t.fieldName,function(){return i._onGetValue()}),this._wrapIntoInput(n,"",0)+"-"+this._wrapIntoInput(n,"",1)+"-"+this._wrapIntoInput(n,"",2)+"-"+this._wrapIntoInput(n,"",3)+this._wrapErrorArea(n)},n.prototype.editFormTemplate=function(n){var r=this,i=SPClientTemplates.Utility.GetFormContextForCurrentField(n),t=n.CurrentFieldValue;return(this._initValidators(n),i=SPClientTemplates.Utility.GetFormContextForCurrentField(n),i.registerGetValueCallback(i.fieldName,function(){return r._onGetValue()}),t.length==16)?this._wrapIntoInput(n,this._getVisaValuePart(t,0),0)+"-"+this._wrapIntoInput(n,this._getVisaValuePart(t,1),1)+"-"+this._wrapIntoInput(n,this._getVisaValuePart(t,2),2)+"-"+this._wrapIntoInput(n,this._getVisaValuePart(t,3),3)+this._wrapErrorArea(n):t},n.prototype.displayFormTemplate=function(n){var t,i;return n!=null&&n.CurrentFieldValue!=null?(t=n.CurrentFieldValue.toString(),t.length==16)?(i=[],i.push(this._getVisaValuePart(t,0)),i.push(this._getVisaValuePart(t,1)),i.push(this._getVisaValuePart(t,2)),i.push(this._getVisaValuePart(t,3)),i.join("-")):t:""},n.prototype.viewTemplate=function(n){var t=n.CurrentItem[n.CurrentFieldSchema.Name]||"(null)",i;return t.length==16?(i=[],i.push(this._getVisaValuePart(t,0)),i.push(this._getVisaValuePart(t,1)),i.push(this._getVisaValuePart(t,2)),i.push(this._getVisaValuePart(t,3)),i.join("-")):t},n.prototype.init=function(n){var u=this,r,t;this._fieldName=n;r=this._fieldName;t={};t.Templates={Fields:{}};t.Templates.Fields[r]={};t.Templates.Fields[r].View=function(n){return u.viewTemplate(n)};t.Templates.Fields[r].NewForm=function(n){return u.newFormTemplate(n)};t.Templates.Fields[r].EditForm=function(n){return u.editFormTemplate(n)};t.Templates.Fields[r].DisplayForm=function(n){return u.displayFormTemplate(n)};SPClientTemplates.TemplateManager.RegisterTemplateOverrides(t);SP.SOD.executeOrDelayUntilScriptLoaded(function(){SP.GanttControl.WaitForGanttCreation(function(n){for(var r=null,f="EDIT_SPDLAB_VISAFIELD",u=n.get_Columns(),t=0;t<u.length;t++)if(u[t].columnKey=="VisaField"){r=u[t];break}r&&(r.fnGetEditControlName=function(){return f},SP.JsGrid.PropertyType.Utils.RegisterEditControl(f,function(n,t){return new i(n,t)},[]))})},"spgantt.js")},n}();n.VisaField=r})(n||(n={}));t=new n.VisaField;t.init("VisaField");i=function(){function n(n,t){var r,i;for(this.gridContext=n,this.gridTextInputElement=t,this._tbs=[],this.SupportedReadMode=SP.JsGrid.EditActorReadType.LocalizedOnly,this.SupportedWriteMode=SP.JsGrid.EditActorWriteType.LocalizedOnly,this._cnt=document.createElement("div"),this._cnt.style.cssText="visibility:hidden;position:absolute;top:0px;left:0px;background:#ffffff;border:1px #dedede solid;",r=0;r<4;r++)i=document.createElement("input"),i.id="spdevlab-visafield-quickedit-"+r.toString(),i.value=r.toString(),i.style.cssText="position:;top:0px;left:0px;",i.maxLength=4,i.size=4,this._cnt.appendChild(i),this._tbs[r]=i;this.gridContext.parentNode.appendChild(this._cnt)}return n.prototype.GetCellContext=function(){return this.cellContext},n.prototype.GetOriginalValue=function(){return this.cellContext.originalValue},n.prototype.SetValue=function(n){this.cellContext.SetCurrentValue({localized:n})},n.prototype.Dispose=function(){},n.prototype.GetInputElement=function(){return null},n.prototype.Focus=function(){},n.prototype.BindToCell=function(n){this.cellContext=n},n.prototype.OnBeginEdit=function(n){var i,t;if(this._inEdit=!0,i=this.cellContext.originalValue.localized,i)for(t=0;t<this._tbs.length;t++)this._tbs[t].value=i.substring(t*4,(t+1)*4);this.cellContext.Show(this._cnt);this.setupHandlers(!0);this.Focus(n)},n.prototype.Unbind=function(){},n.prototype.OnEndEdit=function(){this.cellContext.Hide(this._cnt);this._inEdit=!1;this.setupHandlers(!1);var n=this._tbs[0].value+""+this._tbs[1].value+""+this._tbs[2].value+""+this._tbs[3].value;this.cellContext.SetCurrentValue({localized:n})},n.prototype.OnCellMove=function(){},n.prototype.OnValueChanged=function(){},n.prototype.IsCurrentlyUsingGridTextInputElement=function(){return!1},n.prototype.SetSize=function(){},n.prototype.setupHandlers=function(n){for(var t,i=0;i<this._tbs.length;i++)t=this._tbs[i],n?($addHandler(t,"focus",this.gridContext.OnActivateActor),$addHandler(t,"blur",this.gridContext.OnDeactivateActor),$addHandler(t,"keydown",this.gridContext.OnKeyDown),$addHandler(t,"keyup",this.OnKeyUp),$addHandler(t,"mousedown",this.OnMouseDown)):($removeHandler(t,"focus",this.gridContext.OnActivateActor),$removeHandler(t,"blur",this.gridContext.OnDeactivateActor),$removeHandler(t,"keydown",this.gridContext.OnKeyDown),$removeHandler(t,"keyup",this.OnKeyUp),$removeHandler(t,"mousedown",this.OnMouseDown))},n.prototype.OnKeyUp=function(){},n.prototype.OnMouseDown=function(n){n.stopPropagation()},n}()})(_||(_={}));
/*
//# sourceMappingURL=fieldsamples.visafield.min.js.map
*/