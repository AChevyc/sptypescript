(function(){function r(){t=i.get_currentUser(),n.load(t),n.executeQueryAsync(u,f)}function u(){$("#message").text("Hello "+t.get_title())}function f(n,t){alert("Failed to get user name. Error:"+t.get_message())}var n,i,t;$(document).ready(function(){n=SP.ClientContext.get_current(),i=n.get_web(),r(),JSRequest.EnsureSetup();var t=JSRequest.QueryString.SPAppWebUrl;t&&(window.localStorage.AppWebUrl=decodeURIComponent(t))})})()