function getUserName(){user=web.get_currentUser(),context.load(user),context.executeQueryAsync(onGetUserNameSuccess,onGetUserNameFail)}function onGetUserNameSuccess(){$("#message").text("Hello "+user.get_title())}function onGetUserNameFail(n,t){alert("Failed to get user name. Error:"+t.get_message())}var context,web,user;$(document).ready(function(){context=SP.ClientContext.get_current(),web=context.get_web(),getUserName(),JSRequest.EnsureSetup(),window.localStorage.AppWebUrl=decodeURIComponent(JSRequest.QueryString.SPAppWebUrl)})