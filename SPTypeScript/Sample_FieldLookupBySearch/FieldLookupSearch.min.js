var _;(function(){function n(){CSR.override(10003).fieldNew("Master",t).fieldEdit("Master",t).register()}function t(n){function v(){f=document.getElementById(u),SP.SOD.executeFunc("autofill.js",null,function(){r=new SPClientAutoFill(u,o,y),r.AutoFillMinTextLength=2,r.VisibleItemCount=15,r.AutoFillTimeout=500})}function y(n){var t=n.value;r.PopulateAutoFill([b("Please wait...")],h),SP.SOD.executeFunc("sp.search.js",null,function(){var u=Microsoft.SharePoint.Client.Search.Query,f=SP.ClientContext.get_current(),n=new u.KeywordQuery(f),i,e,o;n.set_rowLimit(15),n.set_queryText("contentclass:STS_ListItem ListID:{"+l.LookupListId+"} "+t),i=n.get_selectProperties(),i.clear(),i.add("Title"),i.add("ListItemId"),e=new u.SearchExecutor(f),o=e.executeQuery(n),f.executeQueryAsync(function(){var e=new u.ResultTableCollection,t;e.initPropertiesFromJson(o.get_value());var f=e.get_item(0),i=f.get_resultRows(),n=[];for(t=0;t<i.length;t++)n.push(p(i[t].Title,parseInt(i[t].ListItemId,10)));n.push(w()),f.get_totalRows()==0?n.push(s("No results. Please refine your query.")):n.push(s("Showing "+i.length+" of"+f.get_totalRows()+" items!")),r.PopulateAutoFill(n,h)},function(n,t){alert(t.get_message())})})}function s(n){var t={};return t[SPClientAutoFill.DisplayTextProperty]=n,t[SPClientAutoFill.MenuOptionTypeProperty]=SPClientAutoFill.MenuOptionType.Footer,t}function p(n,t){var i={};return i[SPClientAutoFill.KeyProperty]=t,i[SPClientAutoFill.DisplayTextProperty]=n,i[SPClientAutoFill.TitleTextProperty]=n,i[SPClientAutoFill.MenuOptionTypeProperty]=SPClientAutoFill.MenuOptionType.Option,i}function w(){var n={};return n[SPClientAutoFill.MenuOptionTypeProperty]=SPClientAutoFill.MenuOptionType.Separator,n}function b(n){var t={};return t[SPClientAutoFill.MenuOptionTypeProperty]=SPClientAutoFill.MenuOptionType.Loading,t[SPClientAutoFill.DisplayTextProperty]=n,t}function h(n,t){var r=document.getElementById(n);r.value=t[SPClientAutoFill.DisplayTextProperty],i.LookupId=t[SPClientAutoFill.KeyProperty],i.LookupValue=t[SPClientAutoFill.DisplayTextProperty],k()}function k(){t.updateControlValue(t.fieldName,c())}function c(){return i.LookupId==0||i.LookupValue==""?"":i.LookupId+";#"+i.LookupValue}function d(){var n=[];return n.push('<span dir="'+STSHtmlEncode(t.fieldSchema.Direction)+'">'),n.push('<input type="text" id="'+STSHtmlEncode(u)+'" value="'+STSHtmlEncode(i.LookupValue)+'" title="'+STSHtmlEncode(t.fieldSchema.Title)+'"/>'),n.push("<br/>"),n.push("<\/span>"),n.push("<div class='sp-peoplepicker-autoFillContainer' id='"+STSHtmlEncode(o)+"'><\/div>"),n.join("")}var t;if(n==null||(t=SPClientTemplates.Utility.GetFormContextForCurrentField(n),t==null||t.fieldSchema==null))return"";var l=t.fieldSchema,r,f,u=t.fieldName+"_"+t.fieldSchema.Id+"_$TextField",o=t.fieldName+"_"+t.fieldSchema.Id+"_$AutoFill",e=t.fieldValue!=null?t.fieldValue:"",i=SPClientTemplates.Utility.ParseLookupValue(e),a=i.LookupId==0;return a&&(e=""),t.registerInitCallback(t.fieldName,v),t.registerFocusCallback(t.fieldName,function(){f!=null&&f.focus()}),t.registerValidationErrorCallback(t.fieldName,function(n){SPFormControl_AppendValidationErrorMessage(u,n)}),t.registerGetValueCallback(t.fieldName,c),t.updateControlValue(t.fieldName,e),d()}SP.SOD.executeOrDelayUntilScriptLoaded(n,"typescripttemplates.ts"),SP.SOD.executeOrDelayUntilScriptLoaded(function(){RegisterModuleInit(SPClientTemplates.Utility.ReplaceUrlTokens("~site/Sample_FieldLookupBySearch/FieldLookupSearch.js"),n)},"sp.js")})(_||(_={}));
//@ sourceMappingURL=FieldLookupSearch.min.js.map