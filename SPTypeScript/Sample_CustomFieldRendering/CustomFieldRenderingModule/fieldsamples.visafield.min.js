var _;(function(){var n,t;(function(n){var t=function(){function n(){}return n.prototype.Validate=function(n){n=SPClientTemplates.Utility.Trim(n);var t=!/^\d{16}$/.test(n),i=t?"Please, fill out 4 digits per every text field.":"";return new SPClientForms.ClientValidation.ValidationResult(t,i)},n}(),i=function(){function n(){this._fieldName="",this._fieldIds=[],this._errorContainerId=null,this._getVisaValuePart=function(n,t){return n.length==16?n.substring(t*4,(t+1)*4):n}}return n.prototype._wrapIntoInput=function(n,t,i){var r=SPClientTemplates.Utility.GetFormContextForCurrentField(n),u=r.fieldName+"_"+r.fieldSchema.Id+"_VisaField_"+i;return this._fieldIds[i]=u,"<input type='text' id='"+u+"' value='"+t+"' maxlength='4' size='4' />"},n.prototype._wrapErrorArea=function(n){var t=SPClientTemplates.Utility.GetFormContextForCurrentField(n),i=t.fieldName+"_"+t.fieldSchema.Id+"_VisaField_Error";return this._errorContainerId=i,"<span id='"+i+"' class='ms-formvalidation ms-csrformvalidation'><\/span>"},n.prototype._onGetValue=function(){var t="",n;if(this._fieldIds.length==4)for(n=0;n<this._fieldIds.length;n++)t+=document.getElementById(this._fieldIds[n]).value;return t},n.prototype._initValidators=function(n){var u=this,i=SPClientTemplates.Utility.GetFormContextForCurrentField(n),r=new SPClientForms.ClientValidation.ValidatorSet;i.fieldSchema.Required&&r.RegisterValidator(new SPClientForms.ClientValidation.RequiredValidator),r.RegisterValidator(new t),i.registerValidationErrorCallback(i.fieldName,function(n){return u.onError(n)}),i.registerClientValidator(i.fieldName,r)},n.prototype.onError=function(n){this._errorContainerId!=null&&(document.getElementById(this._errorContainerId).innerHTML="<span role='alert'>"+n.errorMessage+"<\/span>")},n.prototype.newFormTemplate=function(n){var i=this,t;return this._initValidators(n),t=SPClientTemplates.Utility.GetFormContextForCurrentField(n),t.registerGetValueCallback(t.fieldName,function(){return i._onGetValue()}),this._wrapIntoInput(n,"",0)+"-"+this._wrapIntoInput(n,"",1)+"-"+this._wrapIntoInput(n,"",2)+"-"+this._wrapIntoInput(n,"",3)+this._wrapErrorArea(n)},n.prototype.editFormTemplate=function(n){var r=this,i=SPClientTemplates.Utility.GetFormContextForCurrentField(n),t=n.CurrentFieldValue;return(this._initValidators(n),i=SPClientTemplates.Utility.GetFormContextForCurrentField(n),i.registerGetValueCallback(i.fieldName,function(){return r._onGetValue()}),t.length==16)?this._wrapIntoInput(n,this._getVisaValuePart(t,0),0)+"-"+this._wrapIntoInput(n,this._getVisaValuePart(t,1),1)+"-"+this._wrapIntoInput(n,this._getVisaValuePart(t,2),2)+"-"+this._wrapIntoInput(n,this._getVisaValuePart(t,3),3)+this._wrapErrorArea(n):t},n.prototype.displayFormTemplate=function(n){var t,i;return n!=null&&n.CurrentFieldValue!=null?(t=n.CurrentFieldValue.toString(),t.length==16)?(i=[],i.push(this._getVisaValuePart(t,0)),i.push(this._getVisaValuePart(t,1)),i.push(this._getVisaValuePart(t,2)),i.push(this._getVisaValuePart(t,3)),i.join("-")):t:""},n.prototype.viewTemplate=function(n){var t=n.CurrentItem[n.CurrentFieldSchema.Name]||"(null)",i;return t.length==16?(i=[],i.push(this._getVisaValuePart(t,0)),i.push(this._getVisaValuePart(t,1)),i.push(this._getVisaValuePart(t,2)),i.push(this._getVisaValuePart(t,3)),i.join("-")):t},n.prototype.init=function(n){var r=this,i,t;this._fieldName=n,i=this._fieldName,t={},t.Templates={Fields:{}},t.Templates.Fields[i]={},t.Templates.Fields[i].View=function(n){return r.viewTemplate(n)},t.Templates.Fields[i].NewForm=function(n){return r.newFormTemplate(n)},t.Templates.Fields[i].EditForm=function(n){return r.editFormTemplate(n)},t.Templates.Fields[i].DisplayForm=function(n){return r.displayFormTemplate(n)},SPClientTemplates.TemplateManager.RegisterTemplateOverrides(t)},n}();n.VisaField=i})(n||(n={})),t=new n.VisaField,t.init("VisaField")})(_||(_={}))