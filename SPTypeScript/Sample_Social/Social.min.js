SP.SOD.executeOrDelayUntilScriptLoaded(function(){var t=SP.ClientContext.get_current(),i=new SP.Social.SocialFollowingManager(t),n=new SP.Social.SocialActorInfo,r;n.set_actorType(SP.Social.SocialActorType.site),n.set_contentUri(GetUrlKeyValue("SPHostUrl")),r=i.isFollowed(n),t.executeQueryAsync(function(){if(r.get_value())$get("results").innerHTML="You are already following the app host site!";else{var u=i.follow(n);t.executeQueryAsync(function(){$get("results").innerHTML=u.get_value()==0?"Now you're following the app host site! Check it on your profile page.":"You failed to follow the app host site due to some mysterious error."},function(n,t){alert("Error trying to follow the app host site: "+t.get_message())})}},function(n,t){alert("Error: "+t.get_message())})},"sp.userprofiles.js")